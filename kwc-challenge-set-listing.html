<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../kwc-challenge-set/kwc-challenge-set.html">

<!--
`kwc-challenge-set-listing`
To display all the step-by-step challenge sets available to the user

@demo demo/index.html
-->

<dom-module id="kwc-challenge-set-listing">
    <template>
        <style>
             :host {
                display: block;
            }
            kano-display-training {
                margin: auto;
                max-width: 700px;
            }
        </style>

        <template is="dom-repeat" items="[[challengeSets]]" as="challengeSet">

            <kwc-challenge-set
                label="Challenge Set"
                challenge-set="[[challengeSet]]"
                progress="[[_computeCategoryProgress(challengeSet.category, completedChallenges)]]"
                avatar-url="[[_userAvatarUrl]]"
            >
            </kwc-challenge-set>

        </template>

    </template>

    <script>
        Polymer({

            is: 'kwc-challenge-set-listing',

            properties: {
                challengeSets: {
                    type: Array,
                    value: () => {
                        return [];
                    }
                },
                userAvatarUrl: {
                    type: String,
                    value: null
                },
                _userAvatarUrl: {
                    type: String,
                    computed: '_computeAvatar(userAvatarUrl)'
                },
                completedChallenges: {
                    type: Object,
                    value: () => {
                        return {};
                    }
                },
            },
            _computeAvatar (userAvatarUrl) {
                if (userAvatarUrl) {
                    return userAvatarUrl;
                } else {
                    return "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 181.99 177.35'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bisolation:isolate%3B%7D.cls-2%2C.cls-5%7Bfill:%23fff%3B%7D.cls-2%7Bstroke:%23fff%3Bstroke-linejoin:round%3Bstroke-width:24px%3B%7D.cls-2%2C.cls-4%7Bstroke-linecap:round%3B%7D.cls-3%7Bfill:%23ffb66f%3B%7D.cls-4%7Bfill:none%3Bstroke:%23000%3Bstroke-miterlimit:10%3Bstroke-width:4px%3Bopacity:0.4%3B%7D.cls-6%7Bfill:%2357473e%3B%7D.cls-7%7Bopacity:0.08%3Bmix-blend-mode:multiply%3B%7D.cls-8%7Bfill:%23515451%3B%7D.cls-9%7Bfill:%23626662%3B%7D.cls-10%7Bfill:%235d5c58%3B%7D.cls-11%7Bfill:%236b6a65%3B%7D.cls-12%7Bfill:%23ffce9e%3B%7D%3C/style%3E%3C/defs%3E%3Ctitle%3Esetup-judoka%3C/title%3E%3Cg class='cls-1'%3E%3Cg id='Layer_2' data-name='Layer 2'%3E%3Cg id='Layer_1-2' data-name='Layer 1'%3E%3Cpath class='cls-2' d='M165.7 116.8c.12-.36.25-.7.36-1.07.2-.6.4-1.23.57-1.84l.27-.9q.4-1.4.74-2.8A79 79 0 0 0 150 38.5a79.5 79.5 0 0 0-17.72-14.84 78.3 78.3 0 0 0-34.86-11.4c-2.15-.2-4.32-.28-6.5-.28a78.9 78.9 0 0 0-61 28.76l-.38.44a1.83 1.83 0 0 0 .37.5l1.5 1.5c-1 .52-2.1 1.1-3.2 1.72a2.35 2.35 0 0 0-.5.37c-2.1 2.06-18.1 19-15.4 43.15v.2s0 .24.1.36a53.33 53.33 0 0 0 3.7 13.8 2.4 2.4 0 0 0 .3.48l.1.1a2.3 2.3 0 0 0 .26.26l.13.1.26.2.14.08h.07a2.22 2.22 0 0 0 2.36-.34l.73-.62a70.5 70.5 0 0 0 137.87 11.1 48.58 48.58 0 0 1 3.8 6.18 2.2 2.2 0 0 0 1.84 1.23l.45-1.18v.05l.33-.94.43-1.1c.2-.56.4-1.1.57-1.66z'/%3E%3Ccircle class='cls-3' cx='90.39' cy='94.84' r='70.51'/%3E%3Cpath class='cls-4' d='M108.84 115.05a24.8 24.8 0 0 1-36.84-.9'/%3E%3Cpath class='cls-5' d='M64.64 101.83c0 4.76-3.2 4.92-7.57 4.83h-5.63c-4.37.1-7.56-.07-7.56-4.83a10.38 10.38 0 0 1 20.76 0z'/%3E%3Cpath class='cls-6' d='M59 102.83a4.72 4.72 0 0 1-1.94 3.83h-5.63a4.75 4.75 0 1 1 7.57-3.83z'/%3E%3Ccircle class='cls-5' cx='50.58' cy='99.83' r='1.78'/%3E%3Cpath class='cls-5' d='M136.9 101.83c0 4.76-3.2 4.92-7.56 4.83h-5.63c-4.3.1-7.5-.07-7.5-4.83a10.38 10.38 0 0 1 20.8 0z'/%3E%3Cpath class='cls-6' d='M131.28 102.83a4.72 4.72 0 0 1-1.94 3.83h-5.63a4.75 4.75 0 1 1 7.6-3.83z'/%3E%3Ccircle class='cls-5' cx='122.85' cy='99.83' r='1.78'/%3E%3Cpath class='cls-7' d='M160.8 94.65v.74a69.43 69.43 0 0 1-7 29.8v.1c-12.4-22.6-39-27.6-63.4-36C70 82.2 47.44 58.5 36.6 46c-.1-.1-.17-.2-.26-.3.12-.15.26-.3.37-.47a3.07 3.07 0 0 1 .5-.48l.6-.47c39.9-29.67 82.2-21.2 106.1 4.6a70.07 70.07 0 0 1 16.9 45.75z'/%3E%3Cpath class='cls-8' d='M27.73 45.28C25.25 47.75 3 71.18 16.1 102.8a2.28 2.28 0 0 0 3.57.92c5.86-5 20.84-18.65 22.15-28.35s6.67-27 8.82-33.8a2.25 2.25 0 0 0-2.18-2.95c-3.88.07-11.15 1.06-20.25 6.27a2.36 2.36 0 0 0-.4.3z'/%3E%3Cpath class='cls-9' d='M50.64 41.57c-.15.46-.3 1-.5 1.54a2.33 2.33 0 0 0-1.66-.3c-4.13.6-11.76 2.6-20.8 9.3a2.37 2.37 0 0 0-.47.5c-2 2.6-18.3 24.5-9.8 51.6a2.32 2.32 0 0 1-1.2-1.25C3 71.2 25.3 47.78 27.7 45.3a2.64 2.64 0 0 1 .5-.38c9.1-5.22 16.36-6.2 20.24-6.27a2.25 2.25 0 0 1 2.18 2.94z'/%3E%3Cpath class='cls-10' d='M150 38.53a79.06 79.06 0 0 0-120.43 2.65 1.83 1.83 0 0 0 .37.52c7.5 7.66 37.9 37.4 62.86 43.67 26.86 6.7 55.8 9.24 69.2 35a2.2 2.2 0 0 0 1.88 1.23 75.76 75.76 0 0 0 3.75-11.35A79.13 79.13 0 0 0 150 38.53z'/%3E%3Cpath class='cls-11' d='M170 91.07a78.5 78.5 0 0 1-2.35 19.16 75.6 75.6 0 0 1-3.3 10.25c.53-2.7 1-5.45 1.24-8.25A90.5 90.5 0 0 0 151.4 53a81.23 81.23 0 0 0-37.46-31 75.82 75.82 0 0 0-75.7 11.26 83.17 83.17 0 0 0-8.67 7.92A79.07 79.07 0 0 1 170 91.08z'/%3E%3Ccircle class='cls-12' cx='47.28' cy='115.08' r='2.41'/%3E%3Ccircle class='cls-12' cx='133.51' cy='115.08' r='2.41'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"
                }
            },
            _computeCategoryProgress (category, progress) {
                if (!category || !progress) {
                    return 0;
                }
                return progress[category];
            },
        });
    </script>
</dom-module>